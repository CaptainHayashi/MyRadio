{% extends 'base.twig' %}
{% block head %}
{{ parent() }}
<script type="text/javascript" src="js/nipsweb.player.js"></script>
<script type="text/javascript" src="js/nipsweb.librarypane.js"></script>
<link rel="stylesheet" type="text/css" href="{{shiburl}}css/planner.css" />
{% endblock %}
{% block content %}
<div id="notice" class="ui-state-highlight ui-helper-hidden">Saving...</div>
<div id="head-icons"><button class="btn-feedback">Send Feedback</button>&nbsp;<button class="btn-help"></button><button class="btn-logout" onclick="window.location = 'https://ury.york.ac.uk/portal/redir_out.php'"></button></div>
<header id="content-header">
  <h2>{{title}}</h2>
</header>
<div id="bapswrapper" class="ui-widget">
  <div id="baps-channel-container">
    {% for i in 0..2 %}
      <ul class="baps-channel ui-widget-content" channel="{{i+1}}" id="baps-channel-{{i + 1}}">
        {% for track in tracks[i] %}
          <li id='{{track['recordid']}}-{{track['trackid']}}' type='{{track['type']}}'
              {% if track['managedid'] is defined %}managedid='{{track['managedid']}}'{% endif %}
              {% if track['type'] == 'aux' %}auxid='{{track['auxid']}}'{% endif %}
              length='{{track['length']}}'>{{track['summary']}}</li>
        {% endfor %}
          </ul>
    {% endfor %}

          <div id="resource-add-container" class="ui-widget ui-widget-content">
            <div id="resource-add-header" class="ui-widget-header">
              <?php
              require __DIR__ . '/res_type_sel.php';
              ?>
              <a href="ajax.php?action=manage_library" id="a-manage-library" title="Library Manager">Manage Library</a>
              <span id="res-loading" class="ui-state-highlight ui-helper-hidden">Loading...</span>
              <input type="text" placeholder="Filter by artist..." id="res-filter-artist" class="ui-widget-content" />
              <input type="text" placeholder="Filter by track..." id="res-filter-track" class="ui-widget-content" />
              <input type="text" placeholder="Filter by name..." id="res-filter-name" class="ui-widget-content" />
            </div>
            <ul class="baps-channel" id="baps-channel-res" channel="res">
            </ul>
          </div>

        </div>

        <div id="baps-channelaction-container">
    {% set channels = [1, 2, 3, 'res'] %}
    {% for channel in channels %}
            <div class='baps-channel channel-footer ui-widget-header{% if channel == 'res' %} library-footer'>Library{% else %}'>Channel {{channel}}{% endif %}
              <br>
              <button class='play' id='ch{{channel}}-play' onclick='previewPlay("{{channel}}")'></button>
              <button class='pause' id='ch{{channel}}-pause' onclick='previewPause("{{channel}}")'></button>
              <button class='stop' id='ch{{channel}}-stop' class='ui-state-disabled' onclick='previewStop("{{channel}}")'></button><br>
              <div id='progress-bar-{{channel}}'></div>
              <label id='ch{{channel}}-elapsed'>--:--</label> / 
              <label id='ch{{channel}}-duration'>--:--</label></div>
    {% endfor %}
          </div>
        </div>
        <div id="footer-tips" class="ui-state-highlight ui-helper-hidden"></div>
        <script type="text/javascript">
  $(document).ready(function() {
    initialiseUI();
            {% for i in 0..3 %}
                initialisePlayer('{{i}}');
            {% endfor %}
              });
          </script>
{% endblock %}