{% macro makeURL(config, module, action, options) %}
{{config.base_url}}
{% if config.rewrite_url
%}{{module|default(config.default_module)}}/{{action|default(config.default_action)}}/{%
if options %}?{% endif %}{%
else
%}?module={{module|default(config.default_module)}}&action={{action|default(config.default_action)}}{%
if options %}&{% endif %}{% endif %}{%
for i in options|keys %}{%
if not loop.first %}&{% endif %}{{i}}={{options[i]}}{%
endfor %}
{% endmacro %}

{% macro API(config, module, action, options, id) %}
{{config.api_url}}/{{module}}{% if id %}/{{id}}{% endif %}/{{action}}/{%
if options %}?{% endif %}{%
for i in options|keys %}{%
if not loop.first %}&{% endif %}{{i}}={{options[i]}}{%
endfor %}
{% endmacro %}
